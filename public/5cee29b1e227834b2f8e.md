---
title: 【ArtistでもMELが書きたい】Maya MEL入門(2)【;】
tags:
  - mel
  - maya
private: false
updated_at: '2023-02-04T20:08:31+09:00'
id: 5cee29b1e227834b2f8e
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに
この記事は、3DCG業界で働く**Artist向けのMEL入門記事**です。
普段の業務を効率化したいけど、MELの書き方が分からない、調べたけどイマイチ分からなかった、そんな方向けに書きました。
本記事は「複数のMELコマンドを同時に実行する」をゴールとします。

# 環境
Autodesk Maya 2022.2

# 前回のあらすじと今回へのつなぎ
[前回](https://qiita.com/Hum9183/private/ab5cc907734737b508b4)はコマンドラインを用いて、`nurbsCube`や`polyCube`コマンドを実行しました。
MELコマンドが実行できたのはいいのですが、**一回の実行**で**一つのコマンド**しか実行できないというのは少々不便です。
例えば、一回の実行でNURBSのキューブとポリゴンのキューブの二つを生成するとしたら？現状はできませんよね。

少なくとも、有志の方がネット上で配布されているMELはワンクリックで様々な自動処理がすべて実行される類のものが多いかと思います。

# 複数のコマンドを同時に実行するには？
ものは試しということで、コマンドラインに二つのコマンドを一緒に入れて実行してみましょう。
```
nurbsCube polyCube
```
![MEL_learning01.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3121056/0390f9fd-0147-6deb-7d96-363c99eb3bb6.png)
![MEL_learning02.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3121056/bacf98e7-4dd6-474b-d248-8a544607df9b.png)
コマンドラインの右側に赤いエラーが表示されました。

実はMELを書く際には守らなければいけない**文法**が存在します。
今の書き方はMELの文法に反しているのです。

# 間話 文章の読みやすさ
ここで一つ例え話をします。
>私は今日パンを食べましたお腹が膨れたら眠くなったので仮眠をとりました30分後に起きて明日の宿題をやり始めました

上記の文章を読んでなにか感じることはありますか？

そうです。読みにくいですね。
読みにくい原因は様々あると思いますが、一番の要因は句点(。)がないことだと思います。

>私は今日パンを食べました。お腹が膨れたら眠くなったので仮眠をとりました。30分後に起きて明日の宿題をやり始めました。

句点を入れると上記のようになります。
多少は読みやすくなりましたね。

ということで、
文章は**意味の区切りで分割する**ことでより認識しやすくなる事がわかるかと思います。

**意味の区切りで分割する**という概念はMELにも存在します。

# MELで意味の区切りを分割するには
MELでは意味の区切りを`;`(セミコロン)で表現します。
たとえば
```
nurbsCube;polyCube;
```
上記のテキストは`nurbsCube;`と`polyCube;`の二つに分割できていることになります。

なので、端的に言ってしまえば、
```
nurbsCube polyCube
```
は二つのコマンドが**分割されていなかった**ので、文法として違反しているよというエラーが出たというわけです。

# 正しい文法で再度実行してみる
![MEL_learning03.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3121056/db175e86-1cec-850c-1abf-3772bcc2e38e.png)
シーンビューでは成功しているかが確認しづらいため、アウトライナで確認しましょう。
![MEL_learning04.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3121056/31ac28b6-ab2c-25c6-120f-9643b89af58f.png)
NURBSのキューブとポリゴンのキューブがそれぞれ生成されています。成功です。
つまり、
```
nurbsCube;polyCube;
```
は正しい**文法**で書けていたということになります。

# MELで守らなければいけない文法
MELはいくら簡単とはいえプログラムです。
先程の`;`を用いた**意味の分割**のような文法がいくつか存在します。
ここですべてを紹介することはしませんし、把握する必要もありません。

# おわりに
少しプログラミングチックになってきて、めんどくさいなと思った方がいるかもしれません。
ですがそこまで滅入る必要はありません。
最初からすべてのルールを把握している人などいないのです。
大切なのはエラーが起きたときに、原因を見つけ出すことにあります。

最初のうちはあまり深く考えずに、**そういうもの**という認識でMELを書くことをおすすめします。
MELを書くことが嫌いになっては元も子もありませんからね。

次回はこちら→[【ArtistでもMELが書きたい】Maya MEL入門(3)](https://qiita.com/Hum9183/private/f37458ee3730706098aa)

# 参考
https://knowledge.autodesk.com/ja/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2020/JPN/Maya-Scripting/files/GUID-20F702F9-8A4A-4961-83FC-F231841EF92B-htm.html
